<!DOCTYPE html>
<!-- saved from url=(0053)https://getbootstrap.com/docs/4.2/examples/dashboard/ -->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head head th:replace="component/head :: head">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>用户服务中心</title>

</head>

<body>

<header th:replace="component/fram :: commonHeader"></header>

<!-- Begin page content -->

<div class="container" th:replace="component/fram :: commonMenu"></div>
  <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <div class="chartjs-size-monitor"
      style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
      <div class="chartjs-size-monitor-expand"
        style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
        <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
      </div>
      <div class="chartjs-size-monitor-shrink"
        style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
        <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
      </div>
    </div>


    <h2 style="color:  rgb(135, 106, 32);"><small>房间预订</small></h2>
    <hr color="lightgrey" width="85%" align="left">
    <div class="container" style="padding-left: 0;margin-left: 0;">
      <div class="div-return">
        <a href="room-result.html"><span style="font-size: 17px;">
            <&nbsp;&nbsp;返回</span> </a> </div>
    </div>
    <h3 style="color:  rgb(135, 106, 32);margin-top: 45px;"><small>填写订单</small></h3>
    <hr color="lightgrey" width="85%" align="left">

    <form >
      <div class="input-group" style="margin-left:64px ">
        <span style=" float: left;margin-top: 10px; color: rgb(135, 106, 32);">用户名</span>
        <input type="text" class="form-control col-md-4" id="userid"
          style="float: left;margin-left: 50px;margin-bottom: 30px; " required>
      </div>
      <div class="input-group" style="margin-left:50px ;margin-top: 25px;">
        <label style=" margin-top: 10px; color: rgb(135, 106, 32);">房间类型</label>
        <select class="form-control col-md-4" id="typeRoom" style="margin-left: 50px;">
        <option selected value="请选择房间类型" hidden >请选择房间类型</option>
        </select>
      </div>
      <div class="input-group" style="margin-left:50px ;margin-top:50px;">
        <span style=" float: left;margin-top: 10px; color: rgb(135, 106, 32);">入住日期</span>
        <input type="date" class="form-control col-md-4" id="inDate"
          style="float: left;margin-left: 50px;margin-bottom: 30px; " required>
        <span style="margin-left: 50px; float: left;margin-top: 10px; color: rgb(135, 106, 32);">~</span>
        <input type="date" class="form-control col-md-4" id="outDate"
          style="float: left;margin-left: 50px;margin-bottom: 30px;" required>
      </div>
      <div class="input-group" style="margin-left:50px ;margin-top: 25px;">
        <label style=" margin-top: 10px; color: rgb(135, 106, 32);">办理员工</label>
        <input type="text" class="form-control col-md-4" id="staffId" style="margin-left: 50px;">
        <span
          style="color: rgb(143, 143, 143);margin-left: 10px;margin-top: 15px;font-size: 14px;">(&nbsp;如为用户自行办理订房手续则无需填写&nbsp;)</span>
      </div>
      <hr style="margin-top: 45px;">
      <input id="submit" class="btn btn-danger" style="margin-left: 84%;margin-top: 80px;margin-bottom: 250px" value="提交订单" type="button"
        data-toggle="modal" data-target="#payforroom" onclick="postmessage();">
    </form>

  </main>
<!-- 模态框 -->
<div class="modal fade" id="payforroom" tabindex="-1" role="dialog" aria-labelledby="payforroomLabel"
aria-hidden="true">
<div class="modal-dialog modal-xl" role="document">
  <div class="modal-content">
    <div class="modal-header" style="background-color: rgb(226, 203, 145);">
      <h5 class="modal-title" id="payforroomLabel">订单支付</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="close">
        <Span aria-hidden="true">&times;</Span>
      </button>
    </div>
    <div class="modal-body" style="height: 1000px;">
     
          <form action="http://111.229.114.126:8088/epay/order/alipay" id="form" method="post" class="col-md-12" >
            <label for="id" style="margin-left: 150px;">*订单编号 :</label>
            <input disabled name="id" type="text" value="" class="form-control col-md-6 " style="margin: auto;" id="order_reference"><br>
            <label for="subject" style="margin-left: 150px;">*订单名称 :</label>
            <input disabled name="subject" type="text" value="" class="form-control col-md-6"style="margin: auto;"><br>
            <label for="text" style="margin-left: 150px;">*商品描述 :</label>
            <input disabled name="text" type="text" value="" class="form-control col-md-6" style="margin: auto;"><br>
            <label for="roomNumber" style="margin-left: 150px;">*房间号 :</label>
            <input disabled name="roomNumber" type="text" value="" class="form-control col-md-6" style="margin: auto;" id="room_num"><br>
            <label for="precheckInTime" style="margin-left: 150px;">*预计入住间隔 :</label>
            <input disabled name="precheckInTime" type="text" value="" class="form-control col-md-6" style="margin: auto;" id="pri_time"><br>
            <label for="checkInTime" style="margin-left: 150px;">*入住时间 :</label>
            <input disabled name="checkInTime" type="text" format="年-月-日" value="" class="form-control col-md-6" style="margin: auto;" id="in_time"><br>
            <label for="checkOutTime" style="margin-left: 150px;">*退房时间 :</label>
            <input disabled name="checkOutTime" type="text" value="" class="form-control col-md-6" style="margin: auto;" id="out_time"><br>
            <label for="staffId" style="margin-left: 150px;">*处理员工编号:</label>
            <input disabled name="staffId" type="text" value="" class="form-control col-md-6" style="margin: auto;" id="staff_id"><br>
            <label for="payMoney" style="margin-left: 150px;">*付款金额 :</label>
            <input disabled name="payMoney" type="text" value="" class="form-control col-md-6" style="margin: auto;" id="pay_money"><br>
             <div class="input-group">
            </div>
            <br>
            <div class="input-group" >
            <input class="form-control btn btn-primary col-md-2" type="submit" value="支付宝支付" style="margin-left: 25%;">
            <input class="form-control btn btn-success col-md-2"  type="submit" value=" 微信支付" style="margin-left: 17%;">
            </div>
            </form>
  </div>
  </div>
</div>
</div>
</div>


  <!-- 底部 -->
<footer th:replace="component/fram :: commonFooter"></footer>

  <script>
    document.getElementById('inDate').valueAsDate = new Date();
  </script>

  <script>
      $(document).ready(function (){
          $.ajax({
              url:"/hotel/roomTypeInfo/get-list",
              type:"POST",
              contentType: "application/json; charset=utf-8",
              async: true,
              success:function (result) {
                  var list = result.module;
                  for (var i = 0; i < list.length; i++) {
                      var name = list[i].name;
                      document.getElementById("typeRoom").options.add(new Option(name, i));
                  }
              }
          })
      }
    );
      
      function postmessage() {
          var customer = $('#userid').val();
          var type = $("#typeRoom option:selected").text();
          var intime = $('#inDate').val();
          var outtime = $('#outDate').val();
          var staffid = $('#staffId').val();

          $.ajax({
              url:"/hotel/placeorder/accept-order",
              type:"POST",
              contentType: "application/json; charset=utf-8",
              async: true,
              dataType : 'json',
              data : JSON.stringify({
                  "customerId":customer,
                  "staffId":staffid,
                  "checkInTime":intime,
                  "checkOutTime":outtime,
                  "roomTypeName":type
              }),
              success:function (result) {
                  var model = result.module;
                   var ordernumber = model.id;
                   var roomNumber = model.roomNumber;
                   var customernum = model.customerId;
                   var staffId = model.staffId;
                   var payMoney = model.payMoney;
                   var precheckInTime = model.precheckInTime;
                   var checkInTime = model.checkInTime;
                   var checkOutTime = model.checkOutTime;

                  $("#userid").attr("value",customernum);
                  $("#order_reference").attr("value",ordernumber);
                  $("#room_num").attr("value",roomNumber);
                  $("#staff_id").attr("value",staffId);
                  $("#pay_money").attr("value",payMoney);
                  $("#pre_time").attr("value",precheckInTime);
                  $("#in_time").attr("value",checkInTime);
                  $("#out_time").attr("value",checkOutTime);
              }
          })
      }

      function submitForm(action) {
          document.getElementById("form").action = action;
          document.getElementById("form").submit()
      }
  </script>


</body>

</html>